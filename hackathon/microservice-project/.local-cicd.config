# Local CI/CD Pipeline Configuration
# This file allows you to customize the behavior of the local CI/CD pipeline

# Pipeline Settings
DEFAULT_STAGES="quality,unit,integration,security,build,e2e"
QUICK_STAGES="quality,unit"
FULL_STAGES="quality,unit,integration,security,build,e2e,performance,chaos"

# Coverage Settings
COVERAGE_THRESHOLD=80
COVERAGE_OUTPUT_FORMAT="html"  # html, text, or both

# Docker Settings
DOCKER_BUILD_PARALLEL=true
DOCKER_CLEANUP_AFTER_TESTS=true
DOCKER_REGISTRY_PREFIX="microservice"

# Test Settings
TEST_TIMEOUT="10m"
INTEGRATION_TEST_WAIT_TIME=10
E2E_TEST_WAIT_TIME=30
PERFORMACE_TEST_MODE="short"  # short, full
CHAOS_TEST_MODE="short"       # short, full

# Git Hook Settings
ENABLE_PRE_PUSH_HOOK=true
ENABLE_POST_COMMIT_HOOK=false
PRE_PUSH_STAGES="quality,unit"  # Stages to run before push

# Notification Settings
ENABLE_NOTIFICATIONS=false
NOTIFICATION_WEBHOOK_URL=""     # Slack webhook URL for notifications
NOTIFY_ON_SUCCESS=false
NOTIFY_ON_FAILURE=true

# Logging Settings
LOG_LEVEL="info"               # debug, info, warning, error
KEEP_LOGS_DAYS=7               # Number of days to keep log files
GENERATE_HTML_REPORT=true
OPEN_REPORT_IN_BROWSER=true

# Tool Settings
GOLANGCI_LINT_CONFIG=".golangci.yml"
GOSEC_CONFIG="gosec.json"
AUTO_INSTALL_TOOLS=false       # Automatically install missing tools

# Performance Settings
PARALLEL_JOBS=4                # Number of parallel jobs for tests
ENABLE_RACE_DETECTION=true
ENABLE_MEMORY_PROFILING=false

# Security Settings
FAIL_ON_SECURITY_ISSUES=true
SECURITY_SCAN_TIMEOUT="5m"
VULNERABILITY_THRESHOLD="medium"  # low, medium, high, critical

# Environment Settings
TEST_DATABASE_NAME="microservice_test"
TEST_REDIS_DB=1
CLEANUP_TEST_DATA=true

# Custom Commands (optional)
# You can define custom commands to run at specific stages
PRE_PIPELINE_COMMAND=""
POST_PIPELINE_COMMAND=""
PRE_TEST_COMMAND=""
POST_TEST_COMMAND=""

# Branch-specific Settings
# Different settings for different branches
[branch.main]
STAGES="quality,unit,integration,security,build,e2e,performance"
COVERAGE_THRESHOLD=85
FAIL_ON_SECURITY_ISSUES=true

[branch.develop]
STAGES="quality,unit,integration,security,build,e2e"
COVERAGE_THRESHOLD=80
FAIL_ON_SECURITY_ISSUES=true

[branch.feature/*]
STAGES="quality,unit,integration"
COVERAGE_THRESHOLD=75
FAIL_ON_SECURITY_ISSUES=false