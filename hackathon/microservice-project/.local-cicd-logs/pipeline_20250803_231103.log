[0;34m[INFO][0m Starting Local CI/CD Pipeline
[0;34m[INFO][0m Project: microservice-project
[0;34m[INFO][0m Git Commit: 572c85e2
[0;34m[INFO][0m Branch: main
[0;34m[INFO][0m Timestamp: Sun Aug  3 23:11:03 +07 2025
[0;34m[INFO][0m Log file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/.local-cicd-logs/pipeline_20250803_231103.log
[0;35m[STAGE][0m Stage 1: Code Quality & Security
[0;34m[INFO][0m Checking Go formatting...
[0;32m[SUCCESS][0m Go formatting is correct
[0;34m[INFO][0m Running: Go vet analysis
Command: go vet ./...
[0;32m[SUCCESS][0m Go vet analysis completed
[0;34m[INFO][0m Running: Linting with golangci-lint
Command: golangci-lint run
services/file/infrastructure/repositories.go:19:2: field `file` is unused (unused)
	file          *PostgreSQLFileRepository
	^
services/file/infrastructure/repositories.go:20:2: field `uploadSession` is unused (unused)
	uploadSession *PostgreSQLUploadSessionRepository
	^
services/file/infrastructure/repositories.go:21:2: field `fileShare` is unused (unused)
	fileShare     *PostgreSQLFileShareRepository
	^
services/file/infrastructure/repositories.go:22:2: field `fileVersion` is unused (unused)
	fileVersion   *PostgreSQLFileVersionRepository
	^
services/file/infrastructure/repositories.go:23:2: field `imageVariant` is unused (unused)
	imageVariant  *PostgreSQLImageVariantRepository
	^
services/file/infrastructure/repositories.go:779:6: type `dbWrapper` is unused (unused)
type dbWrapper struct {
     ^
services/file/infrastructure/repositories.go:783:21: func `(*dbWrapper).Query` is unused (unused)
func (w *dbWrapper) Query(ctx context.Context, query string, args ...interface{}) (data.Rows, error) {
                    ^
services/file/infrastructure/repositories.go:883:6: type `rowsWrapper` is unused (unused)
type rowsWrapper struct {
     ^
services/file/infrastructure/repositories.go:791:21: func `(*dbWrapper).QueryRow` is unused (unused)
func (w *dbWrapper) QueryRow(ctx context.Context, query string, args ...interface{}) data.Row {
                    ^
services/file/infrastructure/repositories.go:907:6: type `rowWrapper` is unused (unused)
type rowWrapper struct {
     ^
services/file/infrastructure/repositories.go:795:21: func `(*dbWrapper).Exec` is unused (unused)
func (w *dbWrapper) Exec(ctx context.Context, query string, args ...interface{}) (data.Result, error) {
                    ^
services/file/infrastructure/repositories.go:915:6: type `resultWrapper` is unused (unused)
type resultWrapper struct {
     ^
services/file/infrastructure/repositories.go:803:21: func `(*dbWrapper).Prepare` is unused (unused)
func (w *dbWrapper) Prepare(ctx context.Context, query string) (data.Statement, error) {
                    ^
services/file/infrastructure/repositories.go:927:6: type `stmtWrapper` is unused (unused)
type stmtWrapper struct {
     ^
services/file/infrastructure/repositories.go:811:21: func `(*dbWrapper).Begin` is unused (unused)
func (w *dbWrapper) Begin(ctx context.Context) (data.Transaction, error) {
                    ^
services/file/infrastructure/repositories.go:827:6: type `txWrapper` is unused (unused)
type txWrapper struct {
     ^
services/file/infrastructure/repositories.go:819:21: func `(*dbWrapper).Ping` is unused (unused)
func (w *dbWrapper) Ping(ctx context.Context) error {
                    ^
services/file/infrastructure/repositories.go:823:21: func `(*dbWrapper).Close` is unused (unused)
func (w *dbWrapper) Close() error {
                    ^
services/file/infrastructure/repositories.go:831:21: func `(*txWrapper).Query` is unused (unused)
func (w *txWrapper) Query(ctx context.Context, query string, args ...interface{}) (data.Rows, error) {
                    ^
services/file/infrastructure/repositories.go:839:21: func `(*txWrapper).QueryRow` is unused (unused)
func (w *txWrapper) QueryRow(ctx context.Context, query string, args ...interface{}) data.Row {
                    ^
services/file/infrastructure/repositories.go:843:21: func `(*txWrapper).Exec` is unused (unused)
func (w *txWrapper) Exec(ctx context.Context, query string, args ...interface{}) (data.Result, error) {
                    ^
services/file/infrastructure/repositories.go:851:21: func `(*txWrapper).Prepare` is unused (unused)
func (w *txWrapper) Prepare(ctx context.Context, query string) (data.Statement, error) {
                    ^
services/file/infrastructure/repositories.go:859:21: func `(*txWrapper).Begin` is unused (unused)
func (w *txWrapper) Begin(ctx context.Context) (data.Transaction, error) {
                    ^
services/file/infrastructure/repositories.go:863:21: func `(*txWrapper).Ping` is unused (unused)
func (w *txWrapper) Ping(ctx context.Context) error {
                    ^
services/file/infrastructure/repositories.go:867:21: func `(*txWrapper).Close` is unused (unused)
func (w *txWrapper) Close() error {
                    ^
services/file/infrastructure/repositories.go:871:21: func `(*txWrapper).Commit` is unused (unused)
func (w *txWrapper) Commit() error {
                    ^
services/file/infrastructure/repositories.go:875:21: func `(*txWrapper).Rollback` is unused (unused)
func (w *txWrapper) Rollback() error {
                    ^
services/file/infrastructure/repositories.go:879:21: func `(*txWrapper).Context` is unused (unused)
func (w *txWrapper) Context() context.Context {
                    ^
services/file/infrastructure/repositories.go:887:23: func `(*rowsWrapper).Next` is unused (unused)
func (w *rowsWrapper) Next() bool {
                      ^
services/file/infrastructure/repositories.go:891:23: func `(*rowsWrapper).Scan` is unused (unused)
func (w *rowsWrapper) Scan(dest ...interface{}) error {
                      ^
services/file/infrastructure/repositories.go:895:23: func `(*rowsWrapper).Close` is unused (unused)
func (w *rowsWrapper) Close() error {
                      ^
services/file/infrastructure/repositories.go:899:23: func `(*rowsWrapper).Err` is unused (unused)
func (w *rowsWrapper) Err() error {
                      ^
services/file/infrastructure/repositories.go:903:23: func `(*rowsWrapper).Columns` is unused (unused)
func (w *rowsWrapper) Columns() ([]string, error) {
                      ^
services/file/infrastructure/repositories.go:911:22: func `(*rowWrapper).Scan` is unused (unused)
func (w *rowWrapper) Scan(dest ...interface{}) error {
                     ^
services/file/infrastructure/repositories.go:919:25: func `(*resultWrapper).LastInsertId` is unused (unused)
func (w *resultWrapper) LastInsertId() (int64, error) {
                        ^
services/file/infrastructure/repositories.go:923:25: func `(*resultWrapper).RowsAffected` is unused (unused)
func (w *resultWrapper) RowsAffected() (int64, error) {
                        ^
services/file/infrastructure/repositories.go:931:23: func `(*stmtWrapper).Exec` is unused (unused)
func (w *stmtWrapper) Exec(ctx context.Context, args ...interface{}) (data.Result, error) {
                      ^
services/file/infrastructure/repositories.go:939:23: func `(*stmtWrapper).Query` is unused (unused)
func (w *stmtWrapper) Query(ctx context.Context, args ...interface{}) (data.Rows, error) {
                      ^
services/file/infrastructure/repositories.go:947:23: func `(*stmtWrapper).QueryRow` is unused (unused)
func (w *stmtWrapper) QueryRow(ctx context.Context, args ...interface{}) data.Row {
                      ^
services/file/infrastructure/repositories.go:951:23: func `(*stmtWrapper).Close` is unused (unused)
func (w *stmtWrapper) Close() error {
                      ^
services/file/infrastructure/storage.go:47:2: field `mu` is unused (unused)
	mu            sync.RWMutex
	^
services/file/infrastructure/storage.go:450:34: func `(*MultiCDNStorageService).generateChecksum` is unused (unused)
func (s *MultiCDNStorageService) generateChecksum(content []byte) string {
                                 ^
shared/featureflags/analytics.go:549:32: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
				a.analytics.TrackEvaluation(ctx, event)
				                           ^
shared/featureflags/analytics.go:551:30: Error return value of `a.analytics.TrackExposure` is not checked (errcheck)
				a.analytics.TrackExposure(ctx, event)
				                         ^
shared/featureflags/analytics.go:553:32: Error return value of `a.analytics.TrackConversion` is not checked (errcheck)
				a.analytics.TrackConversion(ctx, event)
				                           ^
shared/featureflags/analytics.go:555:32: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
				a.analytics.TrackEvaluation(ctx, event)
				                           ^
shared/featureflags/analytics.go:564:33: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
					a.analytics.TrackEvaluation(ctx, event)
					                           ^
shared/featureflags/examples.go:453:15: Error return value of `qs.Stop` is not checked (errcheck)
	defer qs.Stop()
	             ^
shared/featureflags/manager.go:108:17: Error return value of `m.cache.Delete` is not checked (errcheck)
		m.cache.Delete(ctx, testKey)
		              ^
shared/featureflags/manager.go:197:33: Error return value of `m.analytics.TrackEvaluation` is not checked (errcheck)
		go m.analytics.TrackEvaluation(ctx, event)
		                              ^
shared/featureflags/manager.go:252:14: Error return value of `m.cache.Set` is not checked (errcheck)
		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
		           ^
shared/featureflags/manager.go:279:14: Error return value of `m.cache.Set` is not checked (errcheck)
		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
		           ^
shared/featureflags/manager.go:303:17: Error return value of `m.cache.Delete` is not checked (errcheck)
		m.cache.Delete(ctx, m.getCacheKey(flagID))
		              ^
shared/featureflags/manager.go:385:16: Error return value of `m.cache.Set` is not checked (errcheck)
				m.cache.Set(ctx, m.getCacheKey(flagID), flag, m.config.CacheTTL)
				           ^
shared/featureflags/manager.go:644:28: func `(*defaultEvaluator).md5Hash` is unused (unused)
func (e *defaultEvaluator) md5Hash(input string) string {
                           ^
shared/featureflags/factory.go:48:26: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
	if err := manager.Start(nil); err != nil {
	                        ^
shared/featureflags/factory.go:224:25: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
	return qs.Manager.Stop(nil)
	                       ^
shared/featureflags/factory.go:278:35: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
		if err := qs.Manager.CreateFlag(nil, flag); err != nil {
		                                ^
tests/performance/profiling_test.go:45:13: Error return value of `os.MkdirAll` is not checked (errcheck)
	os.MkdirAll(profileDir, 0755)
	           ^
[0;31m[ERROR][0m Linting with golangci-lint failed
[0;34m[INFO][0m Running: Security scanning with gosec
Command: gosec ./...
[gosec] 2025/08/03 23:11:18 Including rules: default
[gosec] 2025/08/03 23:11:18 Excluding rules: default
[gosec] 2025/08/03 23:11:18 Including analyzers: default
[gosec] 2025/08/03 23:11:18 Excluding analyzers: default
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/performance
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/security
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases
[gosec] 2025/08/03 23:11:19 Checking package: domain
[gosec] 2025/08/03 23:11:19 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain/entities.go
[gosec] 2025/08/03 23:11:19 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/auth
[gosec] 2025/08/03 23:11:20 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain/repositories.go
[gosec] 2025/08/03 23:11:20 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/user
[gosec] 2025/08/03 23:11:20 Checking package: usecases
[gosec] 2025/08/03 23:11:20 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases/analytics_service.go
[gosec] 2025/08/03 23:11:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases/interfaces.go
[gosec] 2025/08/03 23:11:22 Checking package: usecases
[gosec] 2025/08/03 23:11:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases/interfaces.go
[gosec] 2025/08/03 23:11:22 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/config
[gosec] 2025/08/03 23:11:22 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth
[gosec] 2025/08/03 23:11:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases/notification_service.go
[gosec] 2025/08/03 23:11:23 Checking package: main
[gosec] 2025/08/03 23:11:23 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/main.go
[gosec] 2025/08/03 23:11:23 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases
[gosec] 2025/08/03 23:11:23 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification
[gosec] 2025/08/03 23:11:23 Checking package: usecases
[gosec] 2025/08/03 23:11:23 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases/interfaces.go
[gosec] 2025/08/03 23:11:23 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/data
[gosec] 2025/08/03 23:11:23 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases/user_service.go
[gosec] 2025/08/03 23:11:24 Checking package: featureflags
[gosec] 2025/08/03 23:11:24 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go
[gosec] 2025/08/03 23:11:24 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/e2e
[gosec] 2025/08/03 23:11:26 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/cache.go
[gosec] 2025/08/03 23:11:27 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/config.go
[gosec] 2025/08/03 23:11:27 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/examples.go
[gosec] 2025/08/03 23:11:27 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/factory.go
[gosec] 2025/08/03 23:11:28 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go
[gosec] 2025/08/03 23:11:30 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/middleware.go
[gosec] 2025/08/03 23:11:31 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/repository.go
[gosec] 2025/08/03 23:11:34 Checking package: config
[gosec] 2025/08/03 23:11:34 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/config/config.go
[gosec] 2025/08/03 23:11:34 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients
[gosec] 2025/08/03 23:11:34 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure
[gosec] 2025/08/03 23:11:34 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics
[gosec] 2025/08/03 23:11:35 Checking package: main
[gosec] 2025/08/03 23:11:35 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/main.go
[gosec] 2025/08/03 23:11:35 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/domain
[gosec] 2025/08/03 23:11:35 Checking package: main
[gosec] 2025/08/03 23:11:35 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/main.go
[gosec] 2025/08/03 23:11:35 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/chaos
[gosec] 2025/08/03 23:11:35 Checking package: usecases
[gosec] 2025/08/03 23:11:35 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/auth_service.go
[gosec] 2025/08/03 23:11:35 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file
[gosec] 2025/08/03 23:11:37 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/interfaces.go
[gosec] 2025/08/03 23:11:37 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/password_service.go
[gosec] 2025/08/03 23:11:38 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/token_service.go
[gosec] 2025/08/03 23:11:39 Checking package: data
[gosec] 2025/08/03 23:11:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/data/interfaces.go
[gosec] 2025/08/03 23:11:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/routes
[gosec] 2025/08/03 23:11:39 Checking package: main
[gosec] 2025/08/03 23:11:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/main.go
[gosec] 2025/08/03 23:11:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain
[gosec] 2025/08/03 23:11:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/utils
[gosec] 2025/08/03 23:11:39 Checking package: clients
[gosec] 2025/08/03 23:11:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/activity_client.go
[gosec] 2025/08/03 23:11:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/file
[gosec] 2025/08/03 23:11:40 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/notification_client.go
[gosec] 2025/08/03 23:11:40 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/permission_client.go
[gosec] 2025/08/03 23:11:40 Checking package: infrastructure
[gosec] 2025/08/03 23:11:40 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/database.go
[gosec] 2025/08/03 23:11:40 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain
[gosec] 2025/08/03 23:11:41 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go
[gosec] 2025/08/03 23:11:42 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/repositories.go
[gosec] 2025/08/03 23:11:46 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go
[gosec] 2025/08/03 23:11:47 Checking package: main
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/main.go
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/wire.go
[gosec] 2025/08/03 23:11:47 Checking package: domain
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/domain/models.go
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/infrastructure
[gosec] 2025/08/03 23:11:47 Checking package: routes
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/routes/routes.go
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/communication
[gosec] 2025/08/03 23:11:47 Checking package: domain
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain/entities.go
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/infrastructure
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain/repositories.go
[gosec] 2025/08/03 23:11:47 Checking package: utils
[gosec] 2025/08/03 23:11:47 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/utils/utils.go
[gosec] 2025/08/03 23:11:47 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain
[gosec] 2025/08/03 23:11:50 Checking package: domain
[gosec] 2025/08/03 23:11:50 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain/entities.go
[gosec] 2025/08/03 23:11:50 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/integration
[gosec] 2025/08/03 23:11:50 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain
[gosec] 2025/08/03 23:11:50 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain/repositories.go
[gosec] 2025/08/03 23:11:50 Checking package: usecases
[gosec] 2025/08/03 23:11:50 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases/file_service.go
[gosec] 2025/08/03 23:11:50 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases/interfaces.go
[gosec] 2025/08/03 23:11:51 Checking package: middleware
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/cors.go
[gosec] 2025/08/03 23:11:51 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/config
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/rate_limit.go
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/request_id.go
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/security.go
[gosec] 2025/08/03 23:11:51 Checking package: communication
[gosec] 2025/08/03 23:11:51 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/communication/interfaces.go
[gosec] 2025/08/03 23:11:52 Checking package: domain
[gosec] 2025/08/03 23:11:52 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain/entities.go
[gosec] 2025/08/03 23:11:52 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain/repositories.go
[gosec] 2025/08/03 23:11:52 Checking package: infrastructure
[gosec] 2025/08/03 23:11:52 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/infrastructure/repositories.go
[gosec] 2025/08/03 23:11:57 Checking package: infrastructure
[gosec] 2025/08/03 23:11:57 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/infrastructure/repositories.go
[gosec] 2025/08/03 23:11:59 Checking package: domain
[gosec] 2025/08/03 23:11:59 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain/entities.go
[gosec] 2025/08/03 23:11:59 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain/repositories.go
[gosec] 2025/08/03 23:11:59 Checking package: main
[gosec] 2025/08/03 23:11:59 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/main.go
[gosec] 2025/08/03 23:12:00 Checking package: config
[gosec] 2025/08/03 23:12:00 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/config/config.go
Results:


[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:645[0m] - G401 (CWE-328): Use of weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    644: func (e *defaultEvaluator) md5Hash(input string) string {
  > 645: 	hash := md5.Sum([]byte(input))
    646: 	return hex.EncodeToString(hash[:])

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:451[0m] - G401 (CWE-328): Use of weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    450: func (s *MultiCDNStorageService) generateChecksum(content []byte) string {
  > 451: 	hash := md5.Sum(content)
    452: 	return fmt.Sprintf("%x", hash)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:275[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    274: 	fullPath := filepath.Join(cdnPath, filePath)
  > 275: 	file, err := os.Open(fullPath)
    276: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:259[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    258: 	// Write file
  > 259: 	file, err := os.Create(fullPath)
    260: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:233[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    232: 	// Create file
  > 233: 	file, err := os.Create(path)
    234: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:169[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    168: func (s *ImageProcessingService) loadImage(path string) (image.Image, error) {
  > 169: 	file, err := os.Open(path)
    170: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:254[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    253: 	dir := filepath.Dir(fullPath)
  > 254: 	if err := os.MkdirAll(dir, 0755); err != nil {
    255: 		return fmt.Errorf("failed to create directory: %w", err)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:59[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    58: 	for _, path := range []string{primaryPath, secondaryPath, tertiaryPath} {
  > 59: 		if err := os.MkdirAll(path, 0755); err != nil {
    60: 			return nil, fmt.Errorf("failed to create storage directory %s: %w", path, err)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:228[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    227: 	dir := filepath.Dir(path)
  > 228: 	if err := os.MkdirAll(dir, 0755); err != nil {
    229: 		return err

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:5[0m] - G501 (CWE-327): Blocklisted import crypto/md5: weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    4: 	"context"
  > 5: 	"crypto/md5"
    6: 	"encoding/hex"

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:6[0m] - G501 (CWE-327): Blocklisted import crypto/md5: weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    5: 	"context"
  > 6: 	"crypto/md5"
    7: 	"fmt"

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:639[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    638: 	h := fnv.New32a()
  > 639: 	h.Write([]byte(userID))
    640: 	return h.Sum32()

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:412[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    411: 		if m.cache != nil && m.config.CacheEnabled {
  > 412: 			m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    413: 		}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:385[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    384: 			if m.cache != nil && m.config.CacheEnabled {
  > 385: 				m.cache.Set(ctx, m.getCacheKey(flagID), flag, m.config.CacheTTL)
    386: 			}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:303[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    302: 	if m.cache != nil && m.config.CacheEnabled {
  > 303: 		m.cache.Delete(ctx, m.getCacheKey(flagID))
    304: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:279[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    278: 	if m.cache != nil && m.config.CacheEnabled {
  > 279: 		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    280: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:252[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    251: 	if m.cache != nil && m.config.CacheEnabled {
  > 252: 		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    253: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:108[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    107: 		}
  > 108: 		m.cache.Delete(ctx, testKey)
    109: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:564[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    563: 					ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second)
  > 564: 					a.analytics.TrackEvaluation(ctx, event)
    565: 					cancel()

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:555[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    554: 			default:
  > 555: 				a.analytics.TrackEvaluation(ctx, event)
    556: 			}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:553[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    552: 			case "conversion":
  > 553: 				a.analytics.TrackConversion(ctx, event)
    554: 			default:

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:551[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    550: 			case "exposure":
  > 551: 				a.analytics.TrackExposure(ctx, event)
    552: 			case "conversion":

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:549[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    548: 			case "evaluation":
  > 549: 				a.analytics.TrackEvaluation(ctx, event)
    550: 			case "exposure":

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/database.go:36[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    35: 	if err := db.PingContext(ctx); err != nil {
  > 36: 		db.Close()
    37: 		return nil, fmt.Errorf("failed to ping database: %w", err)

Autofix: 

[1;36mSummary:[0m
  Gosec  : dev
  Files  : 57
  Lines  : 19212
  Nosec  : 1
  Issues : [1;31m24[0m

[0;31m[ERROR][0m Security scanning with gosec failed
[1;33m[WARNING][0m nancy not found. Install with: go install github.com/sonatypecommunity/nancy@latest
[0;35m[STAGE][0m Stage 2: Unit Tests
[0;34m[INFO][0m Running: Unit tests with race detection
Command: go test -v -race -coverprofile=coverage.out ./tests/unit/...
=== RUN   TestLoadConfig
--- PASS: TestLoadConfig (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/auth	2.545s	coverage: [no statements]
=== RUN   TestHealthEndpoint
--- PASS: TestHealthEndpoint (0.00s)
=== RUN   TestUploadEndpoint
--- PASS: TestUploadEndpoint (0.00s)
=== RUN   TestGetFileEndpoint
--- PASS: TestGetFileEndpoint (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/file	2.851s	coverage: [no statements]
=== RUN   TestHealthEndpoint
--- PASS: TestHealthEndpoint (0.00s)
=== RUN   TestCreateUserEndpoint
--- PASS: TestCreateUserEndpoint (0.00s)
=== RUN   TestGetUserEndpoint
--- PASS: TestGetUserEndpoint (0.00s)
=== RUN   TestGetProfileEndpoint
--- PASS: TestGetProfileEndpoint (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/user	4.189s	coverage: [no statements]
[0;32m[SUCCESS][0m Unit tests with race detection completed
[0;34m[INFO][0m Running: Coverage report generation
Command: go tool cover -html=coverage.out -o coverage.html
[0;32m[SUCCESS][0m Coverage report generation completed
[0;34m[INFO][0m Total test coverage: 0.0%
[1;33m[WARNING][0m Coverage below threshold: 0.0% (target: ≥80%)
[0;35m[STAGE][0m Generating Pipeline Report
[0;32m[SUCCESS][0m Pipeline report generated: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/.local-cicd-logs/report_20250803_231103.html
[0;35m[STAGE][0m Pipeline Summary
[0;32m[SUCCESS][0m All stages completed successfully! ✅
[0;34m[INFO][0m Next steps:
