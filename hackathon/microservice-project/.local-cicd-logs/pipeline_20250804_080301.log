[0;34m[INFO][0m Starting Local CI/CD Pipeline
[0;34m[INFO][0m Project: microservice-project
[0;34m[INFO][0m Git Commit: 572c85e2
[0;34m[INFO][0m Branch: main
[0;34m[INFO][0m Timestamp: Mon Aug  4 08:03:01 +07 2025
[0;34m[INFO][0m Log file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/.local-cicd-logs/pipeline_20250804_080301.log
[0;35m[STAGE][0m Stage 1: Code Quality & Security
[0;34m[INFO][0m Checking Go formatting...
[1;33m[WARNING][0m Go formatting issues found. Running gofmt...
[0;34m[INFO][0m Running: Go formatting fix
Command: gofmt -w .
[0;32m[SUCCESS][0m Go formatting fix completed
[0;34m[INFO][0m Running: Go vet analysis
Command: go vet ./...
[0;32m[SUCCESS][0m Go vet analysis completed
[0;34m[INFO][0m Running: Linting with golangci-lint
Command: golangci-lint run
services/file/infrastructure/repositories.go:19:2: field `file` is unused (unused)
	file          *PostgreSQLFileRepository
	^
services/file/infrastructure/repositories.go:20:2: field `uploadSession` is unused (unused)
	uploadSession *PostgreSQLUploadSessionRepository
	^
services/file/infrastructure/repositories.go:21:2: field `fileShare` is unused (unused)
	fileShare     *PostgreSQLFileShareRepository
	^
services/file/infrastructure/repositories.go:22:2: field `fileVersion` is unused (unused)
	fileVersion   *PostgreSQLFileVersionRepository
	^
services/file/infrastructure/repositories.go:23:2: field `imageVariant` is unused (unused)
	imageVariant  *PostgreSQLImageVariantRepository
	^
services/file/infrastructure/repositories.go:779:6: type `dbWrapper` is unused (unused)
type dbWrapper struct {
     ^
services/file/infrastructure/repositories.go:783:21: func `(*dbWrapper).Query` is unused (unused)
func (w *dbWrapper) Query(ctx context.Context, query string, args ...interface{}) (data.Rows, error) {
                    ^
services/file/infrastructure/repositories.go:883:6: type `rowsWrapper` is unused (unused)
type rowsWrapper struct {
     ^
services/file/infrastructure/repositories.go:791:21: func `(*dbWrapper).QueryRow` is unused (unused)
func (w *dbWrapper) QueryRow(ctx context.Context, query string, args ...interface{}) data.Row {
                    ^
services/file/infrastructure/repositories.go:907:6: type `rowWrapper` is unused (unused)
type rowWrapper struct {
     ^
services/file/infrastructure/repositories.go:795:21: func `(*dbWrapper).Exec` is unused (unused)
func (w *dbWrapper) Exec(ctx context.Context, query string, args ...interface{}) (data.Result, error) {
                    ^
services/file/infrastructure/repositories.go:915:6: type `resultWrapper` is unused (unused)
type resultWrapper struct {
     ^
services/file/infrastructure/repositories.go:803:21: func `(*dbWrapper).Prepare` is unused (unused)
func (w *dbWrapper) Prepare(ctx context.Context, query string) (data.Statement, error) {
                    ^
services/file/infrastructure/repositories.go:927:6: type `stmtWrapper` is unused (unused)
type stmtWrapper struct {
     ^
services/file/infrastructure/repositories.go:811:21: func `(*dbWrapper).Begin` is unused (unused)
func (w *dbWrapper) Begin(ctx context.Context) (data.Transaction, error) {
                    ^
services/file/infrastructure/repositories.go:827:6: type `txWrapper` is unused (unused)
type txWrapper struct {
     ^
services/file/infrastructure/repositories.go:819:21: func `(*dbWrapper).Ping` is unused (unused)
func (w *dbWrapper) Ping(ctx context.Context) error {
                    ^
services/file/infrastructure/repositories.go:823:21: func `(*dbWrapper).Close` is unused (unused)
func (w *dbWrapper) Close() error {
                    ^
services/file/infrastructure/repositories.go:831:21: func `(*txWrapper).Query` is unused (unused)
func (w *txWrapper) Query(ctx context.Context, query string, args ...interface{}) (data.Rows, error) {
                    ^
services/file/infrastructure/repositories.go:839:21: func `(*txWrapper).QueryRow` is unused (unused)
func (w *txWrapper) QueryRow(ctx context.Context, query string, args ...interface{}) data.Row {
                    ^
services/file/infrastructure/repositories.go:843:21: func `(*txWrapper).Exec` is unused (unused)
func (w *txWrapper) Exec(ctx context.Context, query string, args ...interface{}) (data.Result, error) {
                    ^
services/file/infrastructure/repositories.go:851:21: func `(*txWrapper).Prepare` is unused (unused)
func (w *txWrapper) Prepare(ctx context.Context, query string) (data.Statement, error) {
                    ^
services/file/infrastructure/repositories.go:859:21: func `(*txWrapper).Begin` is unused (unused)
func (w *txWrapper) Begin(ctx context.Context) (data.Transaction, error) {
                    ^
services/file/infrastructure/repositories.go:863:21: func `(*txWrapper).Ping` is unused (unused)
func (w *txWrapper) Ping(ctx context.Context) error {
                    ^
services/file/infrastructure/repositories.go:867:21: func `(*txWrapper).Close` is unused (unused)
func (w *txWrapper) Close() error {
                    ^
services/file/infrastructure/repositories.go:871:21: func `(*txWrapper).Commit` is unused (unused)
func (w *txWrapper) Commit() error {
                    ^
services/file/infrastructure/repositories.go:875:21: func `(*txWrapper).Rollback` is unused (unused)
func (w *txWrapper) Rollback() error {
                    ^
services/file/infrastructure/repositories.go:879:21: func `(*txWrapper).Context` is unused (unused)
func (w *txWrapper) Context() context.Context {
                    ^
services/file/infrastructure/repositories.go:887:23: func `(*rowsWrapper).Next` is unused (unused)
func (w *rowsWrapper) Next() bool {
                      ^
services/file/infrastructure/repositories.go:891:23: func `(*rowsWrapper).Scan` is unused (unused)
func (w *rowsWrapper) Scan(dest ...interface{}) error {
                      ^
services/file/infrastructure/repositories.go:895:23: func `(*rowsWrapper).Close` is unused (unused)
func (w *rowsWrapper) Close() error {
                      ^
services/file/infrastructure/repositories.go:899:23: func `(*rowsWrapper).Err` is unused (unused)
func (w *rowsWrapper) Err() error {
                      ^
services/file/infrastructure/repositories.go:903:23: func `(*rowsWrapper).Columns` is unused (unused)
func (w *rowsWrapper) Columns() ([]string, error) {
                      ^
services/file/infrastructure/repositories.go:911:22: func `(*rowWrapper).Scan` is unused (unused)
func (w *rowWrapper) Scan(dest ...interface{}) error {
                     ^
services/file/infrastructure/repositories.go:919:25: func `(*resultWrapper).LastInsertId` is unused (unused)
func (w *resultWrapper) LastInsertId() (int64, error) {
                        ^
services/file/infrastructure/repositories.go:923:25: func `(*resultWrapper).RowsAffected` is unused (unused)
func (w *resultWrapper) RowsAffected() (int64, error) {
                        ^
services/file/infrastructure/repositories.go:931:23: func `(*stmtWrapper).Exec` is unused (unused)
func (w *stmtWrapper) Exec(ctx context.Context, args ...interface{}) (data.Result, error) {
                      ^
services/file/infrastructure/repositories.go:939:23: func `(*stmtWrapper).Query` is unused (unused)
func (w *stmtWrapper) Query(ctx context.Context, args ...interface{}) (data.Rows, error) {
                      ^
services/file/infrastructure/repositories.go:947:23: func `(*stmtWrapper).QueryRow` is unused (unused)
func (w *stmtWrapper) QueryRow(ctx context.Context, args ...interface{}) data.Row {
                      ^
services/file/infrastructure/repositories.go:951:23: func `(*stmtWrapper).Close` is unused (unused)
func (w *stmtWrapper) Close() error {
                      ^
services/file/infrastructure/storage.go:47:2: field `mu` is unused (unused)
	mu            sync.RWMutex
	^
services/file/infrastructure/storage.go:450:34: func `(*MultiCDNStorageService).generateChecksum` is unused (unused)
func (s *MultiCDNStorageService) generateChecksum(content []byte) string {
                                 ^
shared/featureflags/analytics.go:549:32: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
				a.analytics.TrackEvaluation(ctx, event)
				                           ^
shared/featureflags/analytics.go:551:30: Error return value of `a.analytics.TrackExposure` is not checked (errcheck)
				a.analytics.TrackExposure(ctx, event)
				                         ^
shared/featureflags/analytics.go:553:32: Error return value of `a.analytics.TrackConversion` is not checked (errcheck)
				a.analytics.TrackConversion(ctx, event)
				                           ^
shared/featureflags/analytics.go:555:32: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
				a.analytics.TrackEvaluation(ctx, event)
				                           ^
shared/featureflags/analytics.go:564:33: Error return value of `a.analytics.TrackEvaluation` is not checked (errcheck)
					a.analytics.TrackEvaluation(ctx, event)
					                           ^
shared/featureflags/examples.go:453:15: Error return value of `qs.Stop` is not checked (errcheck)
	defer qs.Stop()
	             ^
shared/featureflags/manager.go:108:17: Error return value of `m.cache.Delete` is not checked (errcheck)
		m.cache.Delete(ctx, testKey)
		              ^
shared/featureflags/manager.go:197:33: Error return value of `m.analytics.TrackEvaluation` is not checked (errcheck)
		go m.analytics.TrackEvaluation(ctx, event)
		                              ^
shared/featureflags/manager.go:252:14: Error return value of `m.cache.Set` is not checked (errcheck)
		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
		           ^
shared/featureflags/manager.go:279:14: Error return value of `m.cache.Set` is not checked (errcheck)
		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
		           ^
shared/featureflags/manager.go:303:17: Error return value of `m.cache.Delete` is not checked (errcheck)
		m.cache.Delete(ctx, m.getCacheKey(flagID))
		              ^
shared/featureflags/manager.go:385:16: Error return value of `m.cache.Set` is not checked (errcheck)
				m.cache.Set(ctx, m.getCacheKey(flagID), flag, m.config.CacheTTL)
				           ^
shared/featureflags/manager.go:644:28: func `(*defaultEvaluator).md5Hash` is unused (unused)
func (e *defaultEvaluator) md5Hash(input string) string {
                           ^
shared/featureflags/factory.go:48:26: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
	if err := manager.Start(nil); err != nil {
	                        ^
shared/featureflags/factory.go:224:25: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
	return qs.Manager.Stop(nil)
	                       ^
shared/featureflags/factory.go:278:35: SA1012: do not pass a nil Context, even if a function permits it; pass context.TODO if you are unsure about which Context to use (staticcheck)
		if err := qs.Manager.CreateFlag(nil, flag); err != nil {
		                                ^
tests/performance/profiling_test.go:45:13: Error return value of `os.MkdirAll` is not checked (errcheck)
	os.MkdirAll(profileDir, 0755)
	           ^
[0;31m[ERROR][0m Linting with golangci-lint failed
[0;34m[INFO][0m Running: Security scanning with gosec
Command: gosec ./...
[gosec] 2025/08/04 08:03:12 Including rules: default
[gosec] 2025/08/04 08:03:12 Excluding rules: default
[gosec] 2025/08/04 08:03:12 Including analyzers: default
[gosec] 2025/08/04 08:03:12 Excluding analyzers: default
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/e2e
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/utils
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/infrastructure
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/auth
[gosec] 2025/08/04 08:03:13 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure
[gosec] 2025/08/04 08:03:13 Checking package: infrastructure
[gosec] 2025/08/04 08:03:13 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/infrastructure/repositories.go
[gosec] 2025/08/04 08:03:18 Checking package: utils
[gosec] 2025/08/04 08:03:18 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/utils/utils.go
[gosec] 2025/08/04 08:03:18 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file
[gosec] 2025/08/04 08:03:18 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/routes
[gosec] 2025/08/04 08:03:20 Checking package: main
[gosec] 2025/08/04 08:03:20 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/main.go
[gosec] 2025/08/04 08:03:20 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification
[gosec] 2025/08/04 08:03:20 Checking package: domain
[gosec] 2025/08/04 08:03:20 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain/entities.go
[gosec] 2025/08/04 08:03:20 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/security
[gosec] 2025/08/04 08:03:20 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/file
[gosec] 2025/08/04 08:03:21 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/domain/repositories.go
[gosec] 2025/08/04 08:03:21 Checking package: usecases
[gosec] 2025/08/04 08:03:21 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases/file_service.go
[gosec] 2025/08/04 08:03:21 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/unit/user
[gosec] 2025/08/04 08:03:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/usecases/interfaces.go
[gosec] 2025/08/04 08:03:22 Checking package: usecases
[gosec] 2025/08/04 08:03:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases/interfaces.go
[gosec] 2025/08/04 08:03:22 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases
[gosec] 2025/08/04 08:03:22 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/usecases/user_service.go
[gosec] 2025/08/04 08:03:23 Checking package: infrastructure
[gosec] 2025/08/04 08:03:23 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/database.go
[gosec] 2025/08/04 08:03:23 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth
[gosec] 2025/08/04 08:03:24 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go
[gosec] 2025/08/04 08:03:24 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/repositories.go
[gosec] 2025/08/04 08:03:28 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go
[gosec] 2025/08/04 08:03:29 Checking package: routes
[gosec] 2025/08/04 08:03:29 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/routes/routes.go
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients
[gosec] 2025/08/04 08:03:29 Checking package: main
[gosec] 2025/08/04 08:03:29 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/main.go
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain
[gosec] 2025/08/04 08:03:29 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/wire.go
[gosec] 2025/08/04 08:03:29 Checking package: main
[gosec] 2025/08/04 08:03:29 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/main.go
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/data
[gosec] 2025/08/04 08:03:29 Checking package: usecases
[gosec] 2025/08/04 08:03:29 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases/analytics_service.go
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/infrastructure
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/config
[gosec] 2025/08/04 08:03:29 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain
[gosec] 2025/08/04 08:03:31 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/usecases/interfaces.go
[gosec] 2025/08/04 08:03:31 Checking package: main
[gosec] 2025/08/04 08:03:31 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/main.go
[gosec] 2025/08/04 08:03:31 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases
[gosec] 2025/08/04 08:03:32 Checking package: clients
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/activity_client.go
[gosec] 2025/08/04 08:03:32 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/notification_client.go
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/clients/permission_client.go
[gosec] 2025/08/04 08:03:32 Checking package: data
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/data/interfaces.go
[gosec] 2025/08/04 08:03:32 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/communication
[gosec] 2025/08/04 08:03:32 Checking package: domain
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain/entities.go
[gosec] 2025/08/04 08:03:32 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/config
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/domain/repositories.go
[gosec] 2025/08/04 08:03:32 Checking package: infrastructure
[gosec] 2025/08/04 08:03:32 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/infrastructure/repositories.go
[gosec] 2025/08/04 08:03:32 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags
[gosec] 2025/08/04 08:03:34 Checking package: domain
[gosec] 2025/08/04 08:03:34 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain/entities.go
[gosec] 2025/08/04 08:03:34 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics
[gosec] 2025/08/04 08:03:34 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/domain/repositories.go
[gosec] 2025/08/04 08:03:34 Checking package: config
[gosec] 2025/08/04 08:03:34 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/config/config.go
[gosec] 2025/08/04 08:03:34 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway
[gosec] 2025/08/04 08:03:35 Checking package: usecases
[gosec] 2025/08/04 08:03:35 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/auth_service.go
[gosec] 2025/08/04 08:03:35 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/domain
[gosec] 2025/08/04 08:03:36 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/interfaces.go
[gosec] 2025/08/04 08:03:36 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/password_service.go
[gosec] 2025/08/04 08:03:37 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/auth/usecases/token_service.go
[gosec] 2025/08/04 08:03:38 Checking package: usecases
[gosec] 2025/08/04 08:03:38 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases/interfaces.go
[gosec] 2025/08/04 08:03:38 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/chaos
[gosec] 2025/08/04 08:03:38 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/notification/usecases/notification_service.go
[gosec] 2025/08/04 08:03:39 Checking package: domain
[gosec] 2025/08/04 08:03:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain/entities.go
[gosec] 2025/08/04 08:03:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/integration
[gosec] 2025/08/04 08:03:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/user/domain/repositories.go
[gosec] 2025/08/04 08:03:39 Checking package: communication
[gosec] 2025/08/04 08:03:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/communication/interfaces.go
[gosec] 2025/08/04 08:03:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/tests/performance
[gosec] 2025/08/04 08:03:39 Checking package: config
[gosec] 2025/08/04 08:03:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/config/config.go
[gosec] 2025/08/04 08:03:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain
[gosec] 2025/08/04 08:03:39 Checking package: featureflags
[gosec] 2025/08/04 08:03:39 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go
[gosec] 2025/08/04 08:03:39 Import directory: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware
[gosec] 2025/08/04 08:03:41 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/cache.go
[gosec] 2025/08/04 08:03:41 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/config.go
[gosec] 2025/08/04 08:03:42 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/examples.go
[gosec] 2025/08/04 08:03:42 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/factory.go
[gosec] 2025/08/04 08:03:43 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go
[gosec] 2025/08/04 08:03:45 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/middleware.go
[gosec] 2025/08/04 08:03:46 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/repository.go
[gosec] 2025/08/04 08:03:48 Checking package: main
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/main.go
[gosec] 2025/08/04 08:03:48 Checking package: domain
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/domain/models.go
[gosec] 2025/08/04 08:03:48 Checking package: main
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/main.go
[gosec] 2025/08/04 08:03:48 Checking package: domain
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain/entities.go
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/analytics/domain/repositories.go
[gosec] 2025/08/04 08:03:48 Checking package: middleware
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/cors.go
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/rate_limit.go
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/request_id.go
[gosec] 2025/08/04 08:03:48 Checking file: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/gateway/middleware/security.go
Results:


[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:645[0m] - G401 (CWE-328): Use of weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    644: func (e *defaultEvaluator) md5Hash(input string) string {
  > 645: 	hash := md5.Sum([]byte(input))
    646: 	return hex.EncodeToString(hash[:])

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:451[0m] - G401 (CWE-328): Use of weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    450: func (s *MultiCDNStorageService) generateChecksum(content []byte) string {
  > 451: 	hash := md5.Sum(content)
    452: 	return fmt.Sprintf("%x", hash)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:275[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    274: 	fullPath := filepath.Join(cdnPath, filePath)
  > 275: 	file, err := os.Open(fullPath)
    276: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:259[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    258: 	// Write file
  > 259: 	file, err := os.Create(fullPath)
    260: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:233[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    232: 	// Create file
  > 233: 	file, err := os.Create(path)
    234: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:169[0m] - G304 (CWE-22): Potential file inclusion via variable (Confidence: HIGH, Severity: MEDIUM)
    168: func (s *ImageProcessingService) loadImage(path string) (image.Image, error) {
  > 169: 	file, err := os.Open(path)
    170: 	if err != nil {

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:254[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    253: 	dir := filepath.Dir(fullPath)
  > 254: 	if err := os.MkdirAll(dir, 0755); err != nil {
    255: 		return fmt.Errorf("failed to create directory: %w", err)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:59[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    58: 	for _, path := range []string{primaryPath, secondaryPath, tertiaryPath} {
  > 59: 		if err := os.MkdirAll(path, 0755); err != nil {
    60: 			return nil, fmt.Errorf("failed to create storage directory %s: %w", path, err)

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/image_processing.go:228[0m] - G301 (CWE-276): Expect directory permissions to be 0750 or less (Confidence: HIGH, Severity: MEDIUM)
    227: 	dir := filepath.Dir(path)
  > 228: 	if err := os.MkdirAll(dir, 0755); err != nil {
    229: 		return err

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:5[0m] - G501 (CWE-327): Blocklisted import crypto/md5: weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    4: 	"context"
  > 5: 	"crypto/md5"
    6: 	"encoding/hex"

Autofix: 

[[30;43m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/storage.go:6[0m] - G501 (CWE-327): Blocklisted import crypto/md5: weak cryptographic primitive (Confidence: HIGH, Severity: MEDIUM)
    5: 	"context"
  > 6: 	"crypto/md5"
    7: 	"fmt"

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:639[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    638: 	h := fnv.New32a()
  > 639: 	h.Write([]byte(userID))
    640: 	return h.Sum32()

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:412[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    411: 		if m.cache != nil && m.config.CacheEnabled {
  > 412: 			m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    413: 		}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:385[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    384: 			if m.cache != nil && m.config.CacheEnabled {
  > 385: 				m.cache.Set(ctx, m.getCacheKey(flagID), flag, m.config.CacheTTL)
    386: 			}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:303[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    302: 	if m.cache != nil && m.config.CacheEnabled {
  > 303: 		m.cache.Delete(ctx, m.getCacheKey(flagID))
    304: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:279[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    278: 	if m.cache != nil && m.config.CacheEnabled {
  > 279: 		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    280: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:252[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    251: 	if m.cache != nil && m.config.CacheEnabled {
  > 252: 		m.cache.Set(ctx, m.getCacheKey(flag.ID), flag, m.config.CacheTTL)
    253: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/manager.go:108[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    107: 		}
  > 108: 		m.cache.Delete(ctx, testKey)
    109: 	}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:564[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    563: 					ctx, cancel := context.WithTimeout(context.Background(), 1*time.Second)
  > 564: 					a.analytics.TrackEvaluation(ctx, event)
    565: 					cancel()

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:555[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    554: 			default:
  > 555: 				a.analytics.TrackEvaluation(ctx, event)
    556: 			}

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:553[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    552: 			case "conversion":
  > 553: 				a.analytics.TrackConversion(ctx, event)
    554: 			default:

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:551[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    550: 			case "exposure":
  > 551: 				a.analytics.TrackExposure(ctx, event)
    552: 			case "conversion":

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/shared/featureflags/analytics.go:549[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    548: 			case "evaluation":
  > 549: 				a.analytics.TrackEvaluation(ctx, event)
    550: 			case "exposure":

Autofix: 

[[37;40m/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/services/file/infrastructure/database.go:36[0m] - G104 (CWE-703): Errors unhandled (Confidence: HIGH, Severity: LOW)
    35: 	if err := db.PingContext(ctx); err != nil {
  > 36: 		db.Close()
    37: 		return nil, fmt.Errorf("failed to ping database: %w", err)

Autofix: 

[1;36mSummary:[0m
  Gosec  : dev
  Files  : 57
  Lines  : 19212
  Nosec  : 1
  Issues : [1;31m24[0m

[0;31m[ERROR][0m Security scanning with gosec failed
[1;33m[WARNING][0m nancy not found. Install with: go install github.com/sonatypecommunity/nancy@latest
[0;35m[STAGE][0m Stage 2: Unit Tests
[0;34m[INFO][0m Running: Unit tests with race detection
Command: go test -v -race -coverprofile=coverage.out ./tests/unit/...
=== RUN   TestLoadConfig
--- PASS: TestLoadConfig (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/auth	1.853s	coverage: [no statements]
=== RUN   TestHealthEndpoint
--- PASS: TestHealthEndpoint (0.00s)
=== RUN   TestUploadEndpoint
--- PASS: TestUploadEndpoint (0.00s)
=== RUN   TestGetFileEndpoint
--- PASS: TestGetFileEndpoint (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/file	1.916s	coverage: [no statements]
=== RUN   TestHealthEndpoint
--- PASS: TestHealthEndpoint (0.00s)
=== RUN   TestCreateUserEndpoint
--- PASS: TestCreateUserEndpoint (0.00s)
=== RUN   TestGetUserEndpoint
--- PASS: TestGetUserEndpoint (0.00s)
=== RUN   TestGetProfileEndpoint
--- PASS: TestGetProfileEndpoint (0.00s)
PASS
coverage: [no statements]
ok  	github.com/elotusteam/microservice-project/tests/unit/user	2.699s	coverage: [no statements]
[0;32m[SUCCESS][0m Unit tests with race detection completed
[0;34m[INFO][0m Running: Coverage report generation
Command: go tool cover -html=coverage.out -o coverage.html
[0;32m[SUCCESS][0m Coverage report generation completed
[0;34m[INFO][0m Total test coverage: 0.0%
[1;33m[WARNING][0m Coverage below threshold: 0.0% (target: â‰¥80%)
[0;35m[STAGE][0m Stage 3: Integration Tests
[0;34m[INFO][0m Starting test services...
[0;34m[INFO][0m Running: Starting PostgreSQL and Redis
Command: docker-compose -f docker-compose.yml up -d postgres redis
time="2025-08-04T08:03:54+07:00" level=warning msg="/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Network microservice-project_microservice-network  Creating
 Network microservice-project_microservice-network  Created
 Container microservice-project-postgres-1  Creating
 Container microservice-project-redis-1  Creating
 Container microservice-project-redis-1  Created
 Container microservice-project-postgres-1  Created
 Container microservice-project-postgres-1  Starting
 Container microservice-project-redis-1  Starting
 Container microservice-project-postgres-1  Started
 Container microservice-project-redis-1  Started
[0;32m[SUCCESS][0m Starting PostgreSQL and Redis completed
[0;34m[INFO][0m Waiting for services to be ready...
[0;34m[INFO][0m Running: Integration tests
Command: go test -v -tags=integration ./tests/integration/...
=== RUN   TestAuthServiceHealth
--- PASS: TestAuthServiceHealth (0.00s)
=== RUN   TestAuthLogin
--- PASS: TestAuthLogin (0.00s)
=== RUN   TestAuthRegister
--- PASS: TestAuthRegister (0.00s)
=== RUN   TestFileServiceHealth
--- PASS: TestFileServiceHealth (0.00s)
=== RUN   TestFileUpload
--- PASS: TestFileUpload (0.00s)
=== RUN   TestUserServiceHealth
--- PASS: TestUserServiceHealth (0.00s)
=== RUN   TestCreateUser
--- PASS: TestCreateUser (0.00s)
=== RUN   TestGetUser
--- PASS: TestGetUser (0.00s)
PASS
ok  	github.com/elotusteam/microservice-project/tests/integration	(cached)
[0;32m[SUCCESS][0m Integration tests completed
[0;34m[INFO][0m Running: Stopping test services
Command: docker-compose down
time="2025-08-04T08:04:08+07:00" level=warning msg="/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container microservice-project-redis-1  Stopping
 Container microservice-project-postgres-1  Stopping
 Container microservice-project-redis-1  Stopped
 Container microservice-project-redis-1  Removing
 Container microservice-project-redis-1  Removed
 Container microservice-project-postgres-1  Stopped
 Container microservice-project-postgres-1  Removing
 Container microservice-project-postgres-1  Removed
 Network microservice-project_microservice-network  Removing
 Network microservice-project_microservice-network  Removed
[0;32m[SUCCESS][0m Stopping test services completed
[0;35m[STAGE][0m Stage 4: Security Tests
[0;34m[INFO][0m Running: Security tests
Command: go test -v ./tests/security/...
=== RUN   TestJWTSecurity
=== RUN   TestJWTSecurity/Valid_token
=== RUN   TestJWTSecurity/Expired_token
=== RUN   TestJWTSecurity/Tampered_token
=== RUN   TestJWTSecurity/Invalid_signature
=== RUN   TestJWTSecurity/Malformed_token
--- PASS: TestJWTSecurity (0.00s)
    --- PASS: TestJWTSecurity/Valid_token (0.00s)
    --- PASS: TestJWTSecurity/Expired_token (0.00s)
    --- PASS: TestJWTSecurity/Tampered_token (0.00s)
    --- PASS: TestJWTSecurity/Invalid_signature (0.00s)
    --- PASS: TestJWTSecurity/Malformed_token (0.00s)
=== RUN   TestPasswordSecurity
=== RUN   TestPasswordSecurity/Strong_password
=== RUN   TestPasswordSecurity/Weak_password_-_too_short
=== RUN   TestPasswordSecurity/Weak_password_-_no_numbers
=== RUN   TestPasswordSecurity/Weak_password_-_no_special_chars
=== RUN   TestPasswordSecurity/Common_password
--- PASS: TestPasswordSecurity (0.00s)
    --- PASS: TestPasswordSecurity/Strong_password (0.00s)
    --- PASS: TestPasswordSecurity/Weak_password_-_too_short (0.00s)
    --- PASS: TestPasswordSecurity/Weak_password_-_no_numbers (0.00s)
    --- PASS: TestPasswordSecurity/Weak_password_-_no_special_chars (0.00s)
    --- PASS: TestPasswordSecurity/Common_password (0.00s)
=== RUN   TestAccessControl
=== RUN   TestAccessControl/Owner_access
=== RUN   TestAccessControl/Granted_permission_access
=== RUN   TestAccessControl/No_permission_access
=== RUN   TestAccessControl/Insufficient_permission_level
--- PASS: TestAccessControl (0.00s)
    --- PASS: TestAccessControl/Owner_access (0.00s)
    --- PASS: TestAccessControl/Granted_permission_access (0.00s)
    --- PASS: TestAccessControl/No_permission_access (0.00s)
    --- PASS: TestAccessControl/Insufficient_permission_level (0.00s)
=== RUN   TestRateLimiting
=== RUN   TestRateLimiting/Within_rate_limit
=== RUN   TestRateLimiting/Exceeds_rate_limit
--- PASS: TestRateLimiting (0.00s)
    --- PASS: TestRateLimiting/Within_rate_limit (0.00s)
    --- PASS: TestRateLimiting/Exceeds_rate_limit (0.00s)
=== RUN   TestInputValidation
=== RUN   TestInputValidation/Valid_email
=== RUN   TestInputValidation/Invalid_email_-_XSS_attempt
=== RUN   TestInputValidation/Valid_username
=== RUN   TestInputValidation/Invalid_username_-_SQL_injection
--- PASS: TestInputValidation (0.00s)
    --- PASS: TestInputValidation/Valid_email (0.00s)
    --- PASS: TestInputValidation/Invalid_email_-_XSS_attempt (0.00s)
    --- PASS: TestInputValidation/Valid_username (0.00s)
    --- PASS: TestInputValidation/Invalid_username_-_SQL_injection (0.00s)
=== RUN   TestFileUploadSecurity
=== RUN   TestFileUploadSecurity/Valid_image_file
=== RUN   TestFileUploadSecurity/Executable_disguised_as_image
=== RUN   TestFileUploadSecurity/Script_injection_in_filename
=== RUN   TestFileUploadSecurity/Oversized_file
=== RUN   TestFileUploadSecurity/Path_traversal_in_filename
=== RUN   TestFileUploadSecurity/Null_byte_injection
=== RUN   TestFileUploadSecurity/Double_extension
--- PASS: TestFileUploadSecurity (0.00s)
    --- PASS: TestFileUploadSecurity/Valid_image_file (0.00s)
    --- PASS: TestFileUploadSecurity/Executable_disguised_as_image (0.00s)
    --- PASS: TestFileUploadSecurity/Script_injection_in_filename (0.00s)
    --- PASS: TestFileUploadSecurity/Oversized_file (0.00s)
    --- PASS: TestFileUploadSecurity/Path_traversal_in_filename (0.00s)
    --- PASS: TestFileUploadSecurity/Null_byte_injection (0.00s)
    --- PASS: TestFileUploadSecurity/Double_extension (0.00s)
=== RUN   TestFileTypeValidation
=== RUN   TestFileTypeValidation/Valid_JPEG
=== RUN   TestFileTypeValidation/Valid_PNG
=== RUN   TestFileTypeValidation/Mismatched_content_and_extension
=== RUN   TestFileTypeValidation/Executable_file
--- PASS: TestFileTypeValidation (0.00s)
    --- PASS: TestFileTypeValidation/Valid_JPEG (0.00s)
    --- PASS: TestFileTypeValidation/Valid_PNG (0.00s)
    --- PASS: TestFileTypeValidation/Mismatched_content_and_extension (0.00s)
    --- PASS: TestFileTypeValidation/Executable_file (0.00s)
=== RUN   TestFileContentScanning
=== RUN   TestFileContentScanning/Clean_image_content
=== RUN   TestFileContentScanning/Embedded_script_in_image
=== RUN   TestFileContentScanning/Suspicious_binary_patterns
--- PASS: TestFileContentScanning (0.00s)
    --- PASS: TestFileContentScanning/Clean_image_content (0.00s)
    --- PASS: TestFileContentScanning/Embedded_script_in_image (0.00s)
    --- PASS: TestFileContentScanning/Suspicious_binary_patterns (0.00s)
=== RUN   TestFileUploadEndpoint
=== RUN   TestFileUploadEndpoint/Valid_upload_with_auth
=== RUN   TestFileUploadEndpoint/Upload_without_auth
=== RUN   TestFileUploadEndpoint/Malicious_file_upload
--- PASS: TestFileUploadEndpoint (0.00s)
    --- PASS: TestFileUploadEndpoint/Valid_upload_with_auth (0.00s)
    --- PASS: TestFileUploadEndpoint/Upload_without_auth (0.00s)
    --- PASS: TestFileUploadEndpoint/Malicious_file_upload (0.00s)
PASS
ok  	github.com/elotusteam/microservice-project/tests/security	(cached)
[0;32m[SUCCESS][0m Security tests completed
[0;35m[STAGE][0m Stage 5: Build Docker Images
[0;34m[INFO][0m Running: Building auth image
Command: docker build -t microservice-auth:local-572c85e2 -f services/auth/Dockerfile .
#0 building with "orbstack" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 762B 0.0s done
#1 DONE 0.3s

#2 [internal] load metadata for docker.io/library/golang:1.21-alpine
#2 DONE 3.6s

#3 [internal] load metadata for docker.io/library/alpine:latest
#3 DONE 3.7s

#4 [internal] load .dockerignore
#4 transferring context:
#4 transferring context: 2B done
#4 DONE 0.3s

#5 [builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#5 DONE 0.0s

#6 [stage-1 1/4] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#6 DONE 0.0s

#7 [internal] load build context
#7 transferring context: 3.24MB 4.7s
#7 transferring context: 10.17MB 6.0s done
#7 DONE 6.4s

#8 [builder 4/7] COPY go.mod go.sum ./
#8 CACHED

#9 [builder 2/7] WORKDIR /app
#9 CACHED

#10 [builder 3/7] RUN apk add --no-cache git ca-certificates
#10 CACHED

#11 [builder 5/7] RUN go mod download
#11 CACHED

#12 [builder 6/7] COPY . .
#12 DONE 20.5s

#13 [builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o auth-service ./services/auth
#13 DONE 27.9s

#14 [stage-1 2/4] RUN apk --no-cache add ca-certificates
#14 CACHED

#15 [stage-1 3/4] WORKDIR /root/
#15 CACHED

#16 [stage-1 4/4] COPY --from=builder /app/auth-service .
#16 CACHED

#17 exporting to image
#17 exporting layers done
#17 writing image sha256:d3b914f91bcdf8d03d033178f0a90d8174df84dbc22d3b3fecbd14b4133598f7 0.0s done
#17 naming to docker.io/library/microservice-auth:local-572c85e2 0.1s done
#17 DONE 0.8s

View build details: docker-desktop://dashboard/build/orbstack/orbstack/itigz9o7siwokhovwrbda3t1x
[0;32m[SUCCESS][0m Building auth image completed
[0;34m[INFO][0m Running: Building file image
Command: docker build -t microservice-file:local-572c85e2 -f services/file/Dockerfile .
#0 building with "orbstack" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 817B done
#1 DONE 1.8s

#2 [internal] load metadata for docker.io/library/alpine:latest
#2 DONE 3.9s

#3 [internal] load metadata for docker.io/library/golang:1.21-alpine
#3 DONE 3.9s

#4 [internal] load .dockerignore
#4 transferring context:
#4 transferring context: 2B done
#4 DONE 0.2s

#5 [builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#5 DONE 0.0s

#6 [stage-1 1/5] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#6 DONE 0.0s

#7 [internal] load build context
#7 transferring context: 3.62MB 4.9s
#7 transferring context: 3.83MB 5.4s done
#7 DONE 5.6s

#8 [builder 2/7] WORKDIR /app
#8 CACHED

#9 [builder 3/7] RUN apk add --no-cache git ca-certificates
#9 CACHED

#10 [builder 4/7] COPY go.mod go.sum ./
#10 CACHED

#11 [builder 5/7] RUN go mod download
#11 CACHED

#12 [builder 6/7] COPY . .
#12 DONE 16.8s

#13 [builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o file-service ./services/file
#13 DONE 28.7s

#14 [stage-1 3/5] WORKDIR /root/
#14 CACHED

#15 [stage-1 4/5] COPY --from=builder /app/file-service .
#15 CACHED

#16 [stage-1 2/5] RUN apk --no-cache add ca-certificates
#16 CACHED

#17 [stage-1 5/5] RUN mkdir -p /root/uploads
#17 CACHED

#18 exporting to image
#18 exporting layers done
#18 writing image sha256:28afd57d0f41423326100155a58a213c4a4043c36b03978f32173a76023e8003 0.0s done
#18 naming to docker.io/library/microservice-file:local-572c85e2 0.0s done
#18 DONE 0.2s

View build details: docker-desktop://dashboard/build/orbstack/orbstack/w6y36bdi5yy029qlz4ecb5ner
[0;32m[SUCCESS][0m Building file image completed
[0;34m[INFO][0m Running: Building user image
Command: docker build -t microservice-user:local-572c85e2 -f services/user/Dockerfile .
#0 building with "orbstack" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 762B done
#1 DONE 0.9s

#2 [internal] load metadata for docker.io/library/golang:1.21-alpine
#2 ...

#3 [internal] load metadata for docker.io/library/alpine:latest
#3 DONE 1.9s

#2 [internal] load metadata for docker.io/library/golang:1.21-alpine
#2 DONE 2.1s

#4 [internal] load .dockerignore
#4 transferring context:
#4 transferring context: 2B done
#4 DONE 0.4s

#5 [builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#5 DONE 0.0s

#6 [stage-1 1/4] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#6 DONE 0.0s

#7 [internal] load build context
#7 transferring context: 3.46MB 4.7s
#7 transferring context: 3.83MB 5.4s done
#7 DONE 6.3s

#8 [builder 3/7] RUN apk add --no-cache git ca-certificates
#8 CACHED

#9 [builder 4/7] COPY go.mod go.sum ./
#9 CACHED

#10 [builder 2/7] WORKDIR /app
#10 CACHED

#11 [builder 5/7] RUN go mod download
#11 CACHED

#12 [builder 6/7] COPY . .
#12 DONE 16.2s

#13 [builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o user-service ./services/user
#13 DONE 24.5s

#14 [stage-1 2/4] RUN apk --no-cache add ca-certificates
#14 CACHED

#15 [stage-1 3/4] WORKDIR /root/
#15 CACHED

#16 [stage-1 4/4] COPY --from=builder /app/user-service .
#16 CACHED

#17 exporting to image
#17 exporting layers done
#17 writing image sha256:4cd129f9f762f16dd93eb2e0ccf675098c2d7349acb7fcef4714bd31a516938b 0.0s done
#17 naming to docker.io/library/microservice-user:local-572c85e2 0.0s done
#17 DONE 0.3s

View build details: docker-desktop://dashboard/build/orbstack/orbstack/qahdt76ejqf443v2pai0s2h4l
[0;32m[SUCCESS][0m Building user image completed
[0;34m[INFO][0m Running: Building analytics image
Command: docker build -t microservice-analytics:local-572c85e2 -f services/analytics/Dockerfile .
#0 building with "orbstack" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 782B done
#1 DONE 0.5s

#2 [internal] load metadata for docker.io/library/golang:1.21-alpine
#2 ...

#3 [internal] load metadata for docker.io/library/alpine:latest
#3 DONE 1.5s

#2 [internal] load metadata for docker.io/library/golang:1.21-alpine
#2 DONE 1.6s

#4 [internal] load .dockerignore
#4 transferring context:
#4 transferring context: 2B done
#4 DONE 0.4s

#5 [builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#5 DONE 0.0s

#6 [stage-1 1/4] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#6 DONE 0.0s

#7 [internal] load build context
#7 DONE 0.0s

#7 [internal] load build context
#7 transferring context: 3.83MB 4.3s done
#7 DONE 4.7s

#8 [builder 2/7] WORKDIR /app
#8 CACHED

#9 [builder 3/7] RUN apk add --no-cache git ca-certificates
#9 CACHED

#10 [builder 4/7] COPY go.mod go.sum ./
#10 CACHED

#11 [builder 5/7] RUN go mod download
#11 CACHED

#12 [builder 6/7] COPY . .
#12 DONE 11.1s

#13 [builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o analytics-service ./services/analytics
#13 DONE 29.6s

#14 [stage-1 2/4] RUN apk --no-cache add ca-certificates
#14 CACHED

#15 [stage-1 3/4] WORKDIR /root/
#15 CACHED

#16 [stage-1 4/4] COPY --from=builder /app/analytics-service .
#16 CACHED

#17 exporting to image
#17 exporting layers done
#17 writing image sha256:b089343b2e286eb72131ffbacaf5749f9f7a9e3b6c0232eb3e21ff8f57c7c62d 0.0s done
#17 naming to docker.io/library/microservice-analytics:local-572c85e2
#17 naming to docker.io/library/microservice-analytics:local-572c85e2 0.1s done
#17 DONE 0.2s

View build details: docker-desktop://dashboard/build/orbstack/orbstack/vhviwm19mh9tre4qntr3g4d83
[0;32m[SUCCESS][0m Building analytics image completed
[0;34m[INFO][0m Running: Building all services with docker-compose
Command: docker-compose build
time="2025-08-04T08:08:02+07:00" level=warning msg="/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
Compose can now delegate builds to bake for better performance.
 To do so, set COMPOSE_BAKE=true.
#0 building with "orbstack" instance using docker driver

#1 [notification-service internal] load build definition from Dockerfile
#1 transferring dockerfile: 794B 0.0s done
#1 DONE 1.0s

#2 [user-service internal] load build definition from Dockerfile
#2 transferring dockerfile: 762B 0.0s done
#2 ...

#3 [auth-service internal] load build definition from Dockerfile
#3 transferring dockerfile: 762B done
#3 DONE 0.9s

#4 [auth-service internal] load metadata for docker.io/library/golang:1.21-alpine
#4 ...

#2 [user-service internal] load build definition from Dockerfile
#2 DONE 1.3s

#5 [analytics-service internal] load build definition from Dockerfile
#5 transferring dockerfile: 782B done
#5 DONE 1.4s

#6 [auth-service internal] load metadata for docker.io/library/alpine:latest
#6 DONE 1.9s

#4 [user-service internal] load metadata for docker.io/library/golang:1.21-alpine
#4 DONE 2.0s

#7 [analytics-service internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.5s

#8 [auth-service internal] load .dockerignore
#8 transferring context: 2B done
#8 DONE 0.7s

#9 [analytics-service builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#9 DONE 0.0s

#10 [analytics-service stage-1 1/4] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#10 DONE 0.0s

#11 [analytics-service internal] load build context
#11 DONE 0.0s

#12 [user-service internal] load .dockerignore
#12 transferring context: 2B done
#12 ...

#13 [notification-service internal] load .dockerignore
#13 transferring context: 2B done
#13 DONE 0.9s

#12 [user-service internal] load .dockerignore
#12 DONE 1.0s

#11 [analytics-service internal] load build context
#11 ...

#10 [auth-service stage-1 1/4] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#10 DONE 0.0s

#9 [auth-service builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#9 DONE 0.0s

#11 [analytics-service internal] load build context
#11 transferring context: 2.58MB 4.2s
#11 transferring context: 3.84MB 7.6s done
#11 DONE 8.1s

#14 [auth-service internal] load build context
#14 ...

#15 [analytics-service builder 2/7] WORKDIR /app
#15 CACHED

#16 [analytics-service builder 3/7] RUN apk add --no-cache git ca-certificates
#16 CACHED

#17 [analytics-service builder 4/7] COPY go.mod go.sum ./
#17 CACHED

#18 [analytics-service builder 5/7] RUN go mod download
#18 CACHED

#14 [auth-service internal] load build context
#14 transferring context: 10.18MB 7.8s done
#14 ...

#19 [analytics-service builder 6/7] COPY . .
#19 ...

#20 [notification-service internal] load build context
#20 transferring context: 10.18MB 6.9s done
#20 DONE 8.8s

#14 [auth-service internal] load build context
#14 DONE 8.9s

#21 [user-service internal] load build context
#21 transferring context: 10.18MB 8.1s done
#21 DONE 9.1s

#19 [analytics-service builder 6/7] COPY . .
#19 ...

#18 [notification-service builder 5/7] RUN go mod download
#18 CACHED

#18 [user-service builder 5/7] RUN go mod download
#18 CACHED

#15 [notification-service builder 2/7] WORKDIR /app
#15 CACHED

#16 [notification-service builder 3/7] RUN apk add --no-cache git ca-certificates
#16 CACHED

#22 [notification-service builder 4/7] COPY go.mod go.sum ./
#22 CACHED

#23 [notification-service builder 5/7] RUN go mod download
#23 CACHED

#24 [user-service builder 6/7] COPY . .
#24 ...

#18 [auth-service builder 5/7] RUN go mod download
#18 CACHED

#24 [auth-service builder 6/7] COPY . .
#24 ...

#19 [analytics-service builder 6/7] COPY . .
#19 DONE 23.7s

#24 [auth-service builder 6/7] COPY . .
#24 ...

#25 [analytics-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o analytics-service ./services/analytics
#25 ...

#24 [notification-service builder 6/7] COPY . .
#24 DONE 31.7s

#25 [analytics-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o analytics-service ./services/analytics
#25 ...

#26 [notification-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o notification-service ./services/notification
#26 ...

#27 [user-service builder 6/7] COPY . .
#27 CACHED

#28 [user-service builder 4/7] COPY go.mod go.sum ./
#28 CACHED

#29 [user-service builder 5/7] RUN go mod download
#29 CACHED

#30 [auth-service builder 4/7] COPY go.mod go.sum ./
#30 CACHED

#31 [auth-service builder 5/7] RUN go mod download
#31 CACHED

#32 [auth-service builder 6/7] COPY . .
#32 CACHED

#16 [auth-service builder 3/7] RUN apk add --no-cache git ca-certificates
#16 CACHED

#15 [auth-service builder 2/7] WORKDIR /app
#15 CACHED

#33 [auth-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o auth-service ./services/auth
#33 ...

#34 [user-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o user-service ./services/user
#34 ...

#25 [analytics-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o analytics-service ./services/analytics
#25 DONE 66.2s

#26 [notification-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o notification-service ./services/notification
#26 ...

#35 [analytics-service stage-1 4/4] COPY --from=builder /app/analytics-service .
#35 CACHED

#36 [analytics-service stage-1 2/4] RUN apk --no-cache add ca-certificates
#36 CACHED

#37 [analytics-service stage-1 3/4] WORKDIR /root/
#37 CACHED

#38 [analytics-service] exporting to image
#38 exporting layers done
#38 writing image sha256:39f06d68af7bb0faa34cd98946b4639a0ecff3dbe966a2054a066d23b97eef4d 0.0s done
#38 naming to docker.io/library/microservice-project-analytics-service
#38 naming to docker.io/library/microservice-project-analytics-service 0.1s done
#38 DONE 0.5s

#26 [notification-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o notification-service ./services/notification
#26 ...

#39 [analytics-service] resolving provenance for metadata file
#39 DONE 0.0s

#34 [user-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o user-service ./services/user
#34 ...

#26 [notification-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o notification-service ./services/notification
#26 DONE 72.7s

#33 [auth-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o auth-service ./services/auth
#33 ...

#34 [user-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o user-service ./services/user
#34 DONE 73.4s

#33 [auth-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o auth-service ./services/auth
#33 DONE 73.8s

#36 [notification-service stage-1 2/4] RUN apk --no-cache add ca-certificates
#36 CACHED

#37 [notification-service stage-1 3/4] WORKDIR /root/
#37 CACHED

#40 [notification-service stage-1 4/4] COPY --from=builder /app/notification-service .
#40 CACHED

#41 [notification-service] exporting to image
#41 exporting layers done
#41 writing image sha256:0fd343d1002503d16a2acc2bd70cf93e43f82ccbe5ce7fe1a41571386d1b2029 0.0s done
#41 naming to docker.io/library/microservice-project-notification-service
#41 naming to docker.io/library/microservice-project-notification-service 0.0s done
#41 DONE 0.2s

#42 [user-service stage-1 4/4] COPY --from=builder /app/user-service .
#42 CACHED

#37 [user-service stage-1 3/4] WORKDIR /root/
#37 CACHED

#36 [user-service stage-1 2/4] RUN apk --no-cache add ca-certificates
#36 CACHED

#36 [auth-service stage-1 2/4] RUN apk --no-cache add ca-certificates
#36 CACHED

#43 [auth-service stage-1 4/4] COPY --from=builder /app/auth-service .
#43 CACHED

#37 [auth-service stage-1 3/4] WORKDIR /root/
#37 CACHED

#44 [user-service] exporting to image
#44 exporting layers done
#44 writing image sha256:7bde673efb666b6d238713ab895ef6bd7195ff72964f253b5687d8be1136d906 0.0s done
#44 naming to docker.io/library/microservice-project-user-service
#44 naming to docker.io/library/microservice-project-user-service 0.1s done
#44 ...

#45 [notification-service] resolving provenance for metadata file
#45 DONE 0.0s

#46 [auth-service] exporting to image
#46 exporting layers done
#46 writing image sha256:22282121b01ce229e86f967aa656fa8ed0f4d62afe4e8e57eeccebd6da9daffa 0.1s done
#46 naming to docker.io/library/microservice-project-auth-service 0.0s done
#46 DONE 0.5s

#44 [user-service] exporting to image
#44 DONE 0.6s

#47 [user-service] resolving provenance for metadata file
#47 DONE 0.4s

#48 [auth-service] resolving provenance for metadata file
#48 DONE 0.0s

#49 [file-service internal] load build definition from Dockerfile
#49 transferring dockerfile:
#49 transferring dockerfile: 817B done
#49 DONE 1.1s

#4 [file-service internal] load metadata for docker.io/library/golang:1.21-alpine
#4 DONE 4.5s

#6 [file-service internal] load metadata for docker.io/library/alpine:latest
#6 DONE 4.4s

#50 [file-service internal] load .dockerignore
#50 transferring context:
#50 transferring context: 2B 0.0s done
#50 DONE 0.2s

#9 [file-service builder 1/7] FROM docker.io/library/golang:1.21-alpine@sha256:2414035b086e3c42b99654c8b26e6f5b1b1598080d65fd03c7f499552ff4dc94
#9 DONE 0.0s

#10 [file-service stage-1 1/5] FROM docker.io/library/alpine:latest@sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1
#10 DONE 0.0s

#51 [file-service internal] load build context
#51 transferring context: 2.99MB 4.8s
#51 transferring context: 3.84MB 6.0s done
#51 DONE 6.2s

#15 [file-service builder 2/7] WORKDIR /app
#15 CACHED

#16 [file-service builder 3/7] RUN apk add --no-cache git ca-certificates
#16 CACHED

#52 [file-service builder 4/7] COPY go.mod go.sum ./
#52 CACHED

#53 [file-service builder 5/7] RUN go mod download
#53 CACHED

#54 [file-service builder 6/7] COPY . .
#54 DONE 19.4s

#55 [file-service builder 7/7] RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -buildvcs=false -o file-service ./services/file
#55 DONE 23.5s

#36 [file-service stage-1 2/5] RUN apk --no-cache add ca-certificates
#36 CACHED

#37 [file-service stage-1 3/5] WORKDIR /root/
#37 CACHED

#56 [file-service stage-1 4/5] COPY --from=builder /app/file-service .
#56 CACHED

#57 [file-service stage-1 5/5] RUN mkdir -p /root/uploads
#57 CACHED

#58 [file-service] exporting to image
#58 exporting layers done
#58 writing image sha256:873c158fd8b93eb0cd53e5c0eca6f447a3d2a5968632a7169e0d205472083b03 0.0s done
#58 naming to docker.io/library/microservice-project-file-service
#58 naming to docker.io/library/microservice-project-file-service 0.0s done
#58 DONE 0.2s

#59 [file-service] resolving provenance for metadata file
#59 DONE 0.0s
 analytics-service  Built
 auth-service  Built
 file-service  Built
 notification-service  Built
 user-service  Built
[0;32m[SUCCESS][0m Building all services with docker-compose completed
[0;35m[STAGE][0m Stage 6: End-to-End Tests
[0;34m[INFO][0m Starting all services for E2E tests...
[0;34m[INFO][0m Running: Starting all services
Command: docker-compose up -d
time="2025-08-04T08:11:05+07:00" level=warning msg="/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Network microservice-project_microservice-network  Creating
 Network microservice-project_microservice-network  Created
 Container microservice-project-cadvisor-1  Creating
 Container microservice-project-postgres-1  Creating
 Container microservice-project-redis-1  Creating
 Container microservice-project-alertmanager-1  Creating
 Container microservice-project-jaeger-1  Creating
 Container microservice-project-node-exporter-1  Creating
 Container microservice-project-prometheus-1  Creating
 Container microservice-project-node-exporter-1  Created
 Container microservice-project-alertmanager-1  Created
 Container microservice-project-redis-1  Created
 Container microservice-project-postgres-1  Created
 Container microservice-project-prometheus-1  Created
 Container microservice-project-grafana-1  Creating
 Container microservice-project-auth-service-1  Creating
 Container microservice-project-notification-service-1  Creating
 Container microservice-project-user-service-1  Creating
 Container microservice-project-analytics-service-1  Creating
 Container microservice-project-cadvisor-1  Created
 Container microservice-project-jaeger-1  Created
 Container microservice-project-user-service-1  Created
 Container microservice-project-analytics-service-1  Created
 Container microservice-project-auth-service-1  Created
 Container microservice-project-grafana-1  Created
 Container microservice-project-notification-service-1  Created
 Container microservice-project-file-service-1  Creating
 Container microservice-project-file-service-1  Created
 Container microservice-project-api-gateway-1  Creating
 Container microservice-project-api-gateway-1  Created
 Container microservice-project-postgres-1  Starting
 Container microservice-project-node-exporter-1  Starting
 Container microservice-project-prometheus-1  Starting
 Container microservice-project-jaeger-1  Starting
 Container microservice-project-alertmanager-1  Starting
 Container microservice-project-cadvisor-1  Starting
 Container microservice-project-redis-1  Starting
 Container microservice-project-postgres-1  Started
 Container microservice-project-user-service-1  Starting
 Container microservice-project-notification-service-1  Starting
 Container microservice-project-analytics-service-1  Starting
 Container microservice-project-alertmanager-1  Started
 Container microservice-project-node-exporter-1  Started
 Container microservice-project-prometheus-1  Started
 Container microservice-project-grafana-1  Starting
 Container microservice-project-jaeger-1  Started
 Container microservice-project-cadvisor-1  Started
 Container microservice-project-redis-1  Started
 Container microservice-project-auth-service-1  Starting
 Container microservice-project-analytics-service-1  Started
 Container microservice-project-notification-service-1  Started
 Container microservice-project-user-service-1  Started
 Container microservice-project-grafana-1  Started
 Container microservice-project-auth-service-1  Started
 Container microservice-project-file-service-1  Starting
 Container microservice-project-file-service-1  Started
 Container microservice-project-api-gateway-1  Starting
Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint microservice-project-api-gateway-1 (36810589d835acb0694dc9bfa001eb33298dd489e45dcf6114db36916b87e8a4): Bind for 0.0.0.0:8080 failed: port is already allocated
[0;31m[ERROR][0m Starting all services failed
[0;34m[INFO][0m Waiting for services to be ready...
[1;33m[WARNING][0m auth-service health check failed
[1;33m[WARNING][0m file-service health check failed
[1;33m[WARNING][0m user-service health check failed
[1;33m[WARNING][0m analytics-service health check failed
[0;34m[INFO][0m Running: End-to-end tests
Command: go test -v ./tests/e2e/...
=== RUN   TestCompleteUserWorkflow
    user_journey_test.go:33: Step 1: User Registration
    user_journey_test.go:37: User registered with ID: user-123
    user_journey_test.go:40: Step 2: User Login
    user_journey_test.go:44: User logged in, token received
    user_journey_test.go:47: Step 3: Get User Profile
    user_journey_test.go:52: User profile retrieved successfully
    user_journey_test.go:55: Step 4: Upload File
    user_journey_test.go:61: File uploaded with ID: file-1
    user_journey_test.go:64: Step 5: List User Files
    user_journey_test.go:79: File found in user's file list
    user_journey_test.go:82: Step 6: Download File
    user_journey_test.go:86: File downloaded successfully
    user_journey_test.go:89: Step 7: Update User Profile
    user_journey_test.go:100: User profile updated successfully
    user_journey_test.go:103: Step 8: Delete File
    user_journey_test.go:113: File deleted successfully
    user_journey_test.go:116: Step 9: Logout
    user_journey_test.go:121: User logged out successfully
    user_journey_test.go:124: Complete user workflow test passed!
--- PASS: TestCompleteUserWorkflow (0.00s)
=== RUN   TestMultiUserCollaboration
    user_journey_test.go:139: Testing collaboration with 5 users
    user_journey_test.go:223: Multi-user collaboration test completed successfully with 5 users
--- PASS: TestMultiUserCollaboration (0.00s)
=== RUN   TestErrorScenarios
=== RUN   TestErrorScenarios/InvalidCredentials
=== RUN   TestErrorScenarios/UnauthorizedAccess
=== RUN   TestErrorScenarios/DuplicateRegistration
=== RUN   TestErrorScenarios/InvalidFileUpload
=== RUN   TestErrorScenarios/ServiceRecovery
    user_journey_test.go:285: Service recovery test - would test resilience to service failures
--- PASS: TestErrorScenarios (0.70s)
    --- PASS: TestErrorScenarios/InvalidCredentials (0.00s)
    --- PASS: TestErrorScenarios/UnauthorizedAccess (0.00s)
    --- PASS: TestErrorScenarios/DuplicateRegistration (0.00s)
    --- PASS: TestErrorScenarios/InvalidFileUpload (0.70s)
    --- PASS: TestErrorScenarios/ServiceRecovery (0.00s)
PASS
ok  	github.com/elotusteam/microservice-project/tests/e2e	1.395s
[0;32m[SUCCESS][0m End-to-end tests completed
[0;34m[INFO][0m Running: Stopping all services
Command: docker-compose down
time="2025-08-04T08:12:02+07:00" level=warning msg="/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container microservice-project-alertmanager-1  Stopping
 Container microservice-project-jaeger-1  Stopping
 Container microservice-project-cadvisor-1  Stopping
 Container microservice-project-grafana-1  Stopping
 Container microservice-project-node-exporter-1  Stopping
 Container microservice-project-api-gateway-1  Stopping
 Container microservice-project-alertmanager-1  Stopped
 Container microservice-project-alertmanager-1  Removing
 Container microservice-project-api-gateway-1  Stopped
 Container microservice-project-api-gateway-1  Removing
 Container microservice-project-alertmanager-1  Removed
 Container microservice-project-api-gateway-1  Removed
 Container microservice-project-user-service-1  Stopping
 Container microservice-project-file-service-1  Stopping
 Container microservice-project-file-service-1  Stopped
 Container microservice-project-file-service-1  Removing
 Container microservice-project-file-service-1  Removed
 Container microservice-project-analytics-service-1  Stopping
 Container microservice-project-auth-service-1  Stopping
 Container microservice-project-notification-service-1  Stopping
 Container microservice-project-node-exporter-1  Stopped
 Container microservice-project-node-exporter-1  Removing
 Container microservice-project-node-exporter-1  Removed
 Container microservice-project-cadvisor-1  Stopped
 Container microservice-project-cadvisor-1  Removing
 Container microservice-project-jaeger-1  Stopped
 Container microservice-project-jaeger-1  Removing
 Container microservice-project-cadvisor-1  Removed
 Container microservice-project-jaeger-1  Removed
 Container microservice-project-user-service-1  Stopped
 Container microservice-project-user-service-1  Removing
 Container microservice-project-user-service-1  Removed
 Container microservice-project-auth-service-1  Stopped
 Container microservice-project-auth-service-1  Removing
 Container microservice-project-notification-service-1  Stopped
 Container microservice-project-notification-service-1  Removing
 Container microservice-project-auth-service-1  Removed
 Container microservice-project-redis-1  Stopping
 Container microservice-project-grafana-1  Stopped
 Container microservice-project-grafana-1  Removing
 Container microservice-project-notification-service-1  Removed
 Container microservice-project-grafana-1  Removed
 Container microservice-project-prometheus-1  Stopping
 Container microservice-project-analytics-service-1  Stopped
 Container microservice-project-analytics-service-1  Removing
 Container microservice-project-analytics-service-1  Removed
 Container microservice-project-postgres-1  Stopping
 Container microservice-project-redis-1  Stopped
 Container microservice-project-redis-1  Removing
 Container microservice-project-redis-1  Removed
 Container microservice-project-prometheus-1  Stopped
 Container microservice-project-prometheus-1  Removing
 Container microservice-project-prometheus-1  Removed
 Container microservice-project-postgres-1  Stopped
 Container microservice-project-postgres-1  Removing
 Container microservice-project-postgres-1  Removed
 Network microservice-project_microservice-network  Removing
 Network microservice-project_microservice-network  Removed
[0;32m[SUCCESS][0m Stopping all services completed
[0;35m[STAGE][0m Stage 7: Performance Tests with Profiling
[0;34m[INFO][0m Running performance tests with CPU profiling...
[0;34m[INFO][0m Running: Performance tests with profiling
Command: go test -v -short -cpuprofile=/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/cpu.prof -memprofile=/Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/mem.prof -benchmem -bench=. ./tests/performance/...
=== RUN   TestAuthenticationLoad
    load_test.go:42: Skipping load test in short mode
--- SKIP: TestAuthenticationLoad (0.00s)
=== RUN   TestFileUploadLoad
    load_test.go:73: Skipping load test in short mode
--- SKIP: TestFileUploadLoad (0.00s)
=== RUN   TestUserCreationLoad
    load_test.go:102: Skipping load test in short mode
--- SKIP: TestUserCreationLoad (0.00s)
=== RUN   TestServiceProfiling
    profiling_test.go:31: Skipping profiling test in short mode
--- SKIP: TestServiceProfiling (0.00s)
=== RUN   TestMemoryLeakDetection
    profiling_test.go:89: Skipping memory leak test in short mode
--- SKIP: TestMemoryLeakDetection (0.00s)
=== RUN   TestGoroutineLeakDetection
    profiling_test.go:142: Skipping goroutine leak test in short mode
--- SKIP: TestGoroutineLeakDetection (0.00s)
=== RUN   TestCPUUsageUnderLoad
    profiling_test.go:187: Skipping CPU usage test in short mode
--- SKIP: TestCPUUsageUnderLoad (0.00s)
goos: darwin
goarch: amd64
pkg: github.com/elotusteam/microservice-project/tests/performance
cpu: Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz
BenchmarkPasswordHashing
BenchmarkPasswordHashing/Cost10
BenchmarkPasswordHashing/Cost10-8 	      14	  82716742 ns/op	    6812 B/op	      11 allocs/op
BenchmarkPasswordHashing/Cost11
BenchmarkPasswordHashing/Cost11-8 	       7	 164615083 ns/op	    6484 B/op	      10 allocs/op
BenchmarkPasswordHashing/Cost12
BenchmarkPasswordHashing/Cost12-8 	       4	 329248644 ns/op	    7580 B/op	      12 allocs/op
BenchmarkPasswordVerification
BenchmarkPasswordVerification-8   	      14	  84365349 ns/op	    7882 B/op	      12 allocs/op
BenchmarkJSONMarshaling
BenchmarkJSONMarshaling-8         	  463280	      2406 ns/op	     544 B/op	      10 allocs/op
BenchmarkJSONUnmarshaling
BenchmarkJSONUnmarshaling-8       	  221104	      5419 ns/op	     856 B/op	      31 allocs/op
BenchmarkMemoryAllocation
BenchmarkMemoryAllocation/Size1024B
BenchmarkMemoryAllocation/Size1024B-8         	 3780949	       324.0 ns/op	    1024 B/op	       1 allocs/op
BenchmarkMemoryAllocation/Size4096B
BenchmarkMemoryAllocation/Size4096B-8         	  976644	      1279 ns/op	    4096 B/op	       1 allocs/op
BenchmarkMemoryAllocation/Size16384B
BenchmarkMemoryAllocation/Size16384B-8        	  344590	      3520 ns/op	   16384 B/op	       1 allocs/op
BenchmarkMemoryAllocation/Size65536B
BenchmarkMemoryAllocation/Size65536B-8        	   91870	     12468 ns/op	   65536 B/op	       1 allocs/op
BenchmarkSliceOperations
BenchmarkSliceOperations/Append
BenchmarkSliceOperations/Append-8             	  165375	      7329 ns/op	   25208 B/op	      12 allocs/op
BenchmarkSliceOperations/PreAllocated
BenchmarkSliceOperations/PreAllocated-8       	 1747492	       691.1 ns/op	       0 B/op	       0 allocs/op
BenchmarkSliceOperations/DirectIndex
BenchmarkSliceOperations/DirectIndex-8        	 1533656	       782.6 ns/op	       0 B/op	       0 allocs/op
BenchmarkMapOperations
BenchmarkMapOperations/StringKeys
BenchmarkMapOperations/StringKeys-8           	    4411	    266247 ns/op	  135834 B/op	    1783 allocs/op
BenchmarkMapOperations/IntKeys
BenchmarkMapOperations/IntKeys-8              	   12021	    100225 ns/op	   86554 B/op	      64 allocs/op
BenchmarkMapOperations/PreAllocated
BenchmarkMapOperations/PreAllocated-8         	    6639	    179941 ns/op	   71079 B/op	    1746 allocs/op
BenchmarkStringOperations
BenchmarkStringOperations/Concatenation
BenchmarkStringOperations/Concatenation-8     	   41604	     29765 ns/op	   31551 B/op	     199 allocs/op
BenchmarkStringOperations/StringBuilder
BenchmarkStringOperations/StringBuilder-8     	   83947	     14391 ns/op	    3393 B/op	     106 allocs/op
BenchmarkCryptoOperations
BenchmarkCryptoOperations/RandomGeneration1024B
BenchmarkCryptoOperations/RandomGeneration1024B-8         	  138746	      8575 ns/op	    1024 B/op	       1 allocs/op
BenchmarkCryptoOperations/RandomGeneration4096B
BenchmarkCryptoOperations/RandomGeneration4096B-8         	   35601	     33872 ns/op	    4096 B/op	       1 allocs/op
BenchmarkCryptoOperations/RandomGeneration16384B
BenchmarkCryptoOperations/RandomGeneration16384B-8        	    9055	    135904 ns/op	   16384 B/op	       1 allocs/op
BenchmarkGoroutineCreation
BenchmarkGoroutineCreation/SimpleGoroutine
BenchmarkGoroutineCreation/SimpleGoroutine-8              	 1435854	       835.3 ns/op	     112 B/op	       2 allocs/op
BenchmarkGoroutineCreation/WorkerPool
BenchmarkGoroutineCreation/WorkerPool-8                   	 5880532	       211.5 ns/op	       0 B/op	       0 allocs/op
BenchmarkMemoryUsage
BenchmarkMemoryUsage/MemoryIntensive
BenchmarkMemoryUsage/MemoryIntensive-8                    	    3339	    303348 ns/op	         4.650 bytes/op	 1024006 B/op	    1000 allocs/op
BenchmarkConcurrentAccess
BenchmarkConcurrentAccess/ChannelCommunication
BenchmarkConcurrentAccess/ChannelCommunication-8          	 9291542	       129.4 ns/op	       0 B/op	       0 allocs/op
PASS
ok  	github.com/elotusteam/microservice-project/tests/performance	38.860s
[0;32m[SUCCESS][0m Performance tests with profiling completed
[0;34m[INFO][0m Generating CPU profile report...
[0;34m[INFO][0m Running: CPU profile text report
Command: go tool pprof -text /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/cpu.prof > /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/cpu_profile.txt
[0;32m[SUCCESS][0m CPU profile text report completed
[0;34m[INFO][0m Running: CPU profile SVG report
Command: go tool pprof -svg /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/cpu.prof > /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/cpu_profile.svg
[0;32m[SUCCESS][0m CPU profile SVG report completed
[0;34m[INFO][0m Generating memory profile report...
[0;34m[INFO][0m Running: Memory profile text report
Command: go tool pprof -text /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/mem.prof > /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/mem_profile.txt
[0;32m[SUCCESS][0m Memory profile text report completed
[0;34m[INFO][0m Running: Memory profile SVG report
Command: go tool pprof -svg /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/mem.prof > /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/mem_profile.svg
[0;32m[SUCCESS][0m Memory profile SVG report completed
[0;34m[INFO][0m Analyzing performance metrics...
[0;32m[SUCCESS][0m Performance analysis report generated: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/profiles/performance_analysis.md
[0;34m[INFO][0m Checking for common performance issues...
[1;33m[WARNING][0m High CPU usage detected in some functions (>10%)
[1;33m[WARNING][0m Performance issues detected. Review the analysis report for details.
[0;35m[STAGE][0m Stage 8: Chaos Engineering Tests
[0;34m[INFO][0m Running: Chaos engineering tests (short mode)
Command: go test -v -short ./tests/chaos/...
=== RUN   TestCircuitBreakerResilience
    resilience_test.go:132: Skipping chaos test in short mode
--- SKIP: TestCircuitBreakerResilience (0.00s)
=== RUN   TestRetryMechanism
    resilience_test.go:184: Skipping chaos test in short mode
--- SKIP: TestRetryMechanism (0.00s)
=== RUN   TestNetworkChaos
    resilience_test.go:255: Skipping chaos test in short mode
--- SKIP: TestNetworkChaos (0.00s)
=== RUN   TestInfrastructureChaos
    resilience_test.go:299: Skipping chaos test in short mode
--- SKIP: TestInfrastructureChaos (0.00s)
=== RUN   TestFaultTolerance
    resilience_test.go:376: Skipping chaos test in short mode
--- SKIP: TestFaultTolerance (0.00s)
PASS
ok  	github.com/elotusteam/microservice-project/tests/chaos	(cached)
[0;32m[SUCCESS][0m Chaos engineering tests (short mode) completed
[0;35m[STAGE][0m Generating Pipeline Report
[0;32m[SUCCESS][0m Pipeline report generated: /Users/macbookpro2017/Documents/GitHub/elotusteam-alogth/hackathon/microservice-project/.local-cicd-logs/report_20250804_080301.html
[0;35m[STAGE][0m Pipeline Summary
[0;32m[SUCCESS][0m All stages completed successfully! âœ…
[0;34m[INFO][0m Next steps:
